<%= form_tag bikes_path, :method => 'get', :id => "bikes_search" do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
  </p>
  <div class="span12">
    <div class="row">
    <div class="span3">
            <div class="well sidebar-nav">
                <ul class="nav nav-list">    
                <li class="nav-header">Current Selection</li>
                    <% if !@type_selection.nil?%>
                        <li>
                        

                        <a href = "<%=bikes_path(sort: params[:sort], :direction => params[:direction], body: params[:body], make: params[:make], model: params[:model], color: params[:color],type: nil )%>"><%= @type_selection %>   <i class = "icon-remove"></i></a>
                        </li>
                    <%end%>

                    <% if !@body_selection.nil?%>
                        <li>
                        

                        <a href = "<%=bikes_path(sort: params[:sort], :direction => params[:direction], body: nil, make: params[:make], model: params[:model], color: params[:color],type: params[:type] )%>"><%= @body_selection %>   <i class = "icon-remove"></i></a>
                        </li>
                    <%end%>
                    <% if !@make_selection.nil?%>
                        <li>
                        

                        <a href = "<%=bikes_path(sort: params[:sort], :direction => params[:direction], body: params[:body], make: nil, model: nil, color: params[:color],type: params[:type] )%>"><%= @make_selection %>   <i class = "icon-remove"></i></a>
                        </li>
                    <%end%>
                    <% if !@model_selection.nil?%>
                        <li>
                        

                        <a href = "<%=bikes_path(sort: params[:sort], :direction => params[:direction], body: params[:body], make: params[:make], model: nil, color: params[:color],type: params[:type] )%>"><%= @model_selection %>   <i class = "icon-remove"></i></a>
                        </li>
                    <%end%>
                    <% if !@color_selection.nil?%>
                        <li>
                        <div>

                        <a href = "<%=bikes_path(sort: params[:sort], :direction => params[:direction], body: params[:body], make: params[:make], model: params[:model], color: nil,type: params[:type] )%>"><%= @color_selection %>   <i class = "icon-remove"></i></a>
                    </div>
                        </li>
                    <%end%>                        

            </ul>
          
            </div> 
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
                <li class="nav-header">Sidebar</li>
                <li><a href= <%= bikes_path(sort: "price", :direction => "desc", body: params[:body]) %>> Price Highest to lowest </a></li>
                <li><a href= <%= bikes_path(sort: "price", :direction => "asc",body: params[:body]) %>>Price Lowest to Highest</a></li>
                <li>
                    <b>Type:</b>
                    <ul class = "type">
                        
                        <% @types.each do |type| %>
                            <li> <%= link_to type + " ("+@bikes.where(type: type).count.to_s+")", bikes_path(sort: params[:sort], :direction => params[:direction], body: params[:body], make: params[:make], model: params[:model], color: params[:color], type: type )%> 
                            </li>
                         <% end %>
                    </ul>
                </li>
                <li>Body
                    <ul>
                        <li>
                            <a href= <%= bikes_path(sort: params[:sort], :direction => params[:direction], type: params[:type], body: "Sports") %>>Sports</a>
                        </li>
                    </ul>
                </li>
                <li>Make
                    <ul>
                        <% @makes.each do |make| %>
                            <li>
                                <%= link_to make, bikes_path(sort: params[:sort], :direction => params[:direction], body: params[:body], model: params[:model], color: params[:color],type: params[:type],make: make)%>(<%=@bikes.where(make: make).count%>)
                            </li>
                        <% end %>
                    </ul>
                </li>
                <li>Models
                    <ul>
                        <% @models.each do |model| %>
                            <li>
                                <%= link_to model, bikes_path(sort: params[:sort], :direction => params[:direction], body: params[:body], make: params[:make], color: params[:color],type: params[:type],model: model)%>(<%=@bikes.where(model: model).count%>)
                            </li>  
                        <% end %>
                    </ul>
                </li>
                <li>Colour
                    <ul>  
                        <% @colors.each do |color| %>
                            <li>
                                <%= link_to color, bikes_path(sort: params[:sort], :direction => params[:direction], type: params[:type],body: params[:body], make: params[:make], model: params[:model], color: color )%>(<%=@bikes.where(color: color).count%>)
                                
                            </li>
                        <% end %>
                    </ul>
                </li>

              </div><!--/.well -->
        </div><!--/span-->

<div class="span9">    
<div class = "bikes">
<%=render "bikes"%>
</div>
</div>
</div>
<% end %>

<%= link_to "Sign in with Facebook", user_omniauth_authorize_path(:facebook) %>
